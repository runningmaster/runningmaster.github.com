Соглашения 
----------

1. API определяется следующим общим форматом:

	```
	http://api.{domain}/{version}/{aspect}/{action}
	```

2. API реализуется двумя HTTP методами: 

	* `GET` - для получения данных из сервиса
	* `POST` - для передачи данных в сервис

3. API предпочитает формат данных `application/json` (см. [JSON](http://json.org/)), в специальных же случаях может быть оговорен другой тип (см. [Content-Type](http://en.wikipedia.org/wiki/Mime_type)), например, `text/csv` для исторической поддержки определенного вида информации.


Linkdroid API
-------------

Облачный сервис распознавания входящих данных различного типа в реальном режиме времени. Нераспознанные названия отсылает в сервис экспертной системы для последующей их привязки к значениям ключей эталонных справочников. Распознанные названия вместе с их атрибутами отсылает для последующей обработки в соотвествующие сервисы.

* **Получение кодов типов данных и их форматов**: `incoming/help`

	Отдает коды типов данных в виде первых восьми символов SHA-1 кода строковых констант - кодовых имен этих типов (задается разработчиком), вместе со ссылкой на пример их демонстрационной стуктуры.

	`GET` `http://api.morion.ua/1/incoming/help`

	```
	[
		{
			"type": "720fc5af",
			"desc": "Аптечный чек",
			"meta": "http://api.morion.ua/1/incoming/720fc5af/help"
		},

		{
			"type": "1a383386",
			"desc": "Оптовый прайс лист",
			"meta": "http://api.morion.ua/1/incoming/1a383386/help"
		},
	]
	```	

	`GET` `http://api.morion.ua/1/incoming/720fc5af/help`

	```
	{
		"id": number,                            //  description here
		"name": ["string", "string", "string"],  //  description here
		"price": [float, float, float]           //  description here
	}
	```


* **Прием данных по их типу:** `incoming/:type/add`

	Принимает данные, их формат и логика последующей обработки зависит от типа `:type`.

	`720fc5af` - например, чек из аптеки

	`POST` `http://api.morion.ua/1/incoming/720fc5af/add`

	```
	{
		"id": 403,
		"name": ["one", "two", "three"],
		"price": [0.5, 1.25, 3.50]
	}
	```

	`1a383386` - что-то еще, например прайс-лист в `csv`.

	`POST` `http://api.morion.ua/1/incoming/1a383386/add`

	```
	"value";"value";"value";
	"value";"value";"value";
	"value";"value";"value";
	"value";"value";"value";
	```

* **Создание ссылки:** `link/create`
	
	Присваивает контрольной сумме `sha` ссылку на новое значение эталонного ключа `new`.

	`POST` `http://api.morion.ua/1/link/create`

	```
	{
		"sha": "7c0e9591ff9b00f397718a63ae17370c566d4ca8",  // контрольная сумма (string) 
		"new": 5577006791947779410                          // новое значение ключа (Int64)
	}
	```

* **Переназначение ссылки:** `link/update`

	Обновляет все ссылки эталонного ключа `old` на его новое значение `new`.

	`POST` `http://api.morion.ua/1/link/update`

	```
	{
		"old": 5577006791947779410,  // предыдущее значение (Int64)
		"new": 4039410712379194777   // новое значение (Int64)
	}
	```

* **Удаление ссылки:** `link/delete`

	Удаляет все ссылки на эталонный ключ `old`.

	`POST` `http://api.morion.ua/1/link/delete`

	```
	{
		"old": 4039410712379194777  // текущее значение (Int64)
	}
	```
